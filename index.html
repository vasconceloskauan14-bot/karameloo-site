<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Karamello | Edi√ß√£o Profissional</title>

  <style>
    :root{
      --bg:#070b18;
      --panel:#0b1226;
      --text:#e5e7eb;
      --muted:#9ca3af;

      --accent1:#7c3aed; /* roxo */
      --accent2:#2563eb; /* azul */
      --accent3:#38bdf8; /* ciano */

      --border:rgba(255,255,255,.12);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text);
      overflow-x:hidden;
      color-scheme: dark;
      background: var(--bg);
      position:relative;
    }

    /* ‚úÖ Fundo degrad√™ 3 cores (fosco) */
    .bg{
      position:fixed; inset:0; z-index:-3;
      background:
        radial-gradient(1200px 800px at 12% 10%, rgba(124,58,237,.34), transparent 62%),
        radial-gradient(1200px 800px at 88% 12%, rgba(37,99,235,.30), transparent 62%),
        radial-gradient(1100px 900px at 50% 85%, rgba(56,189,248,.16), transparent 62%),
        linear-gradient(135deg, rgba(124,58,237,.18) 0%, rgba(37,99,235,.16) 48%, rgba(56,189,248,.10) 100%),
        linear-gradient(180deg, rgba(7,11,24,.98), rgba(5,8,18,.99));
      filter:saturate(1.1);
    }

    /* ‚úÖ Orbs animadas leves (sem exagero) */
    .orb{
      position:fixed;
      width:520px; height:520px;
      border-radius:50%;
      z-index:-2;
      opacity:.34;
      filter: blur(22px);
      animation: float 14s ease-in-out infinite;
      pointer-events:none;
      transform: translateZ(0);
      will-change: transform;
      mix-blend-mode: screen;
    }
    .orb.one{
      left:-180px; top:130px;
      background: radial-gradient(circle at 35% 35%, rgba(124,58,237,.92), rgba(124,58,237,0) 60%);
      animation-duration: 16s;
    }
    .orb.two{
      right:-240px; top:60px;
      background: radial-gradient(circle at 40% 35%, rgba(37,99,235,.90), rgba(37,99,235,0) 60%);
      animation-duration: 18s;
      animation-delay: -3s;
    }
    .orb.three{
      left:22%; bottom:-280px;
      width:680px; height:680px;
      background: radial-gradient(circle at 50% 40%, rgba(56,189,248,.70), rgba(56,189,248,0) 62%);
      animation-duration: 20s;
      animation-delay: -5s;
    }
    @keyframes float{
      0%{ transform: translate3d(0,0,0) scale(1); }
      50%{ transform: translate3d(0,-16px,0) scale(1.02); }
      100%{ transform: translate3d(0,0,0) scale(1); }
    }

    /* ‚úÖ Sparkles SUPER leves */
    .sparkles{
      position:fixed; inset:0; z-index:-1;
      pointer-events:none;
      opacity:.18;
      background-image:
        radial-gradient(circle, rgba(255,255,255,.24) 1px, transparent 1.8px),
        radial-gradient(circle, rgba(56,189,248,.15) 1px, transparent 1.8px);
      background-size: 76px 76px, 100px 100px;
      background-position: 0 0, 28px 22px;
      will-change: transform;
      transform: translateZ(0);
      animation: drift 28s linear infinite;
    }
    @keyframes drift{
      from{ transform: translate3d(0,0,0); }
      to{ transform: translate3d(-80px, -60px, 0); }
    }

    /* ‚úÖ Entrada */
    .page{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      opacity:0;
      transform: translateY(8px);
      animation: pageIn .55s ease forwards;
    }
    @keyframes pageIn{to{opacity:1; transform:translateY(0)}}

    header{
      padding:44px 18px 28px;
      background: linear-gradient(90deg,
        rgba(124,58,237,.55),
        rgba(37,99,235,.50),
        rgba(56,189,248,.25)
      );
      border-bottom:1px solid rgba(255,255,255,.12);
    }
    .wrap{max-width:1100px;margin:0 auto}
    h1{
      margin:0;
      font-size: clamp(2rem, 3.4vw, 3rem);
      letter-spacing:.3px;
    }
    .subtitle{
      margin-top:10px;
      color: rgba(229,231,235,.9);
      font-size:1.05rem;
    }

    main{padding:26px 18px 60px; position:relative;}
    main::before{
      content:"";
      position:absolute; inset:0;
      background: rgba(2,6,23,.18);
      pointer-events:none;
    }
    main > .wrap{position:relative; z-index:1;}

    .screen{display:none;opacity:0;transform: translateY(10px);}
    .screen.show{display:block;animation: screenIn .35s ease forwards;}
    @keyframes screenIn{to{opacity:1;transform:translateY(0)}}

    .hero{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:18px;
      align-items:stretch;
    }
    @media (max-width: 860px){ .hero{grid-template-columns:1fr} }

    /* ‚úÖ CARD OTIMIZADO (para n√£o travar nos pacotes) */
    .card{
      background: linear-gradient(180deg, rgba(11,18,38,.92), rgba(10,16,34,.88));
      border:1px solid var(--border);
      border-radius:18px;
      padding:18px;

      /* sombra mais leve */
      box-shadow: 0 10px 26px rgba(0,0,0,.35);

      /* performance */
      content-visibility: auto;
      contain-intrinsic-size: 320px 220px;
      contain: layout paint style;
    }

    .card h3{margin:0 0 8px;font-size:1.15rem;color:#c7d2fe;}
    .card p{margin:0;color:var(--muted);line-height:1.35}

    .btn{
      margin-top:14px;
      width:100%;
      padding:12px 14px;
      border:none;
      border-radius:12px;
      background: linear-gradient(90deg, var(--accent1), var(--accent2));
      color:white;
      font-weight:700;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:hover{transform: translateY(-1px); filter: brightness(1.04);}
    .btn:active{transform: translateY(0px); filter: brightness(.98);}
    .btn.secondary{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      color: var(--text);
    }

    .section-title{margin:26px 0 12px; color:#c7d2fe; font-size:1.25rem;}
    .pill{display:inline-block;margin-top:6px;color:var(--muted);font-size:.95rem;}

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns: repeat(2, 1fr);} }
    @media (max-width: 620px){ .grid{grid-template-columns: 1fr;} }
    .grid .full{grid-column: 1 / -1;}

    .price{margin:10px 0 10px;font-weight:900;font-size:1.25rem;color: var(--accent3);}
    ul{margin:10px 0 0; padding-left:18px; color:#cbd5e1}
    li{margin:6px 0}

    .card.highlight{
      border:1px solid rgba(56,189,248,.35);
      box-shadow:0 12px 28px rgba(0,0,0,.38), 0 0 0 4px rgba(56,189,248,.05);
    }

    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.62);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:1000;
    }
    .overlay.show{display:flex; animation: fadeIn .2s ease forwards;}
    .overlay.closing{animation: fadeOut .22s ease forwards;}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    @keyframes fadeOut{from{opacity:1}to{opacity:0}}

    .modal{
      width:min(520px, 100%);
      background: linear-gradient(180deg, rgba(11,18,38,.95), rgba(10,16,34,.92));
      border:1px solid rgba(255,255,255,.16);
      border-radius:18px;
      box-shadow: 0 30px 80px rgba(0,0,0,.60);
      overflow:hidden;
      transform: translateY(10px) scale(.98);
      opacity:0;
      animation: modalIn .25s ease forwards;
    }
    .modal.closing{animation: modalOut .22s ease forwards;}
    @keyframes modalIn{to{opacity:1;transform:translateY(0) scale(1)}}
    @keyframes modalOut{to{opacity:0;transform:translateY(8px) scale(.98)}}

    .modalHead{
      padding:16px 18px;
      background: linear-gradient(90deg, rgba(124,58,237,.72), rgba(37,99,235,.72));
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .modalHead strong{font-size:1.05rem}
    .close{
      width:36px;height:36px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      background: rgba(255,255,255,.14);
      color:white;
      font-size:18px;
    }
    .modalBody{padding:18px}
    .field{margin-bottom:12px}
    .field label{display:block;font-size:.88rem;color:#cbd5e1;margin:0 0 6px}

    input, textarea, select{
      width:100%;
      padding:11px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      outline:none;
      color-scheme: dark;
    }
    textarea{min-height:96px; resize:vertical;}
    input::placeholder, textarea::placeholder{color: rgba(229,231,235,.68)}
    input:focus, textarea:focus, select:focus{border-color: rgba(56,189,248,.55)}
    select option{background: var(--panel); color: var(--text);}
    input[type="date"]::-webkit-datetime-edit{ color: var(--text); }
    input[type="date"]::-webkit-calendar-picker-indicator{filter: invert(1);opacity:.85;cursor:pointer;}
    .hint{color:var(--muted); font-size:.9rem; margin-top:10px}

    .mini-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .mini label{display:block;font-size:.88rem;color:#cbd5e1;margin:0 0 6px}
    .checks{display:grid;gap:8px}
    .chk{display:flex;gap:10px;align-items:center;color:#cbd5e1;font-size:.95rem}
    .chk input{width:auto;margin:0}

    .total-box{
      margin-top:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(56,189,248,.22);
      background: rgba(56,189,248,.06);
    }
    .total-line{display:flex;justify-content:space-between;align-items:center}
    .total-line strong{font-size:1.25rem;color:var(--accent3)}
    .total-sub{margin-top:6px;color:var(--muted);font-size:.95rem}

    footer{padding:18px;color:rgba(229,231,235,.7);text-align:center;}

    /* ‚úÖ MODO LEVE AUTOM√ÅTICO */
    @media (prefers-reduced-motion: reduce){
      .orb, .sparkles{ animation: none !important; }
    }
    @media (max-width: 900px){
      .sparkles{ display:none; }
      .orb{ filter: blur(16px); opacity:.28; }
    }

    /* ===== Sele√ß√£o de Editores (Cliente) ===== */
    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
      margin-top:12px;
    }
    .toolbar .left, .toolbar .right{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
    .chip{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:#e5e7eb;
      font-size:.92rem;
    }
    .editor-cards{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
      margin-top:12px;
    }
    @media (max-width: 980px){ .editor-cards{grid-template-columns: repeat(2, 1fr);} }
    @media (max-width: 620px){ .editor-cards{grid-template-columns: 1fr;} }
    .eCard{
      background: linear-gradient(180deg, rgba(11,18,38,.92), rgba(10,16,34,.88));
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      padding:14px;
      box-shadow: 0 10px 26px rgba(0,0,0,.35);
      content-visibility:auto;
      contain-intrinsic-size: 320px 240px;
      contain: layout paint style;
    }
    .eTop{display:flex; justify-content:space-between; align-items:flex-start; gap:10px;}
    .eName{font-weight:900; color:#e5e7eb; font-size:1.05rem}
    .eMeta{color:rgba(229,231,235,.70); font-size:.92rem; margin-top:4px}
    .rating{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(56,189,248,.22);
      background: rgba(56,189,248,.08);
      color:#e5e7eb;
      font-size:.92rem;
      white-space:nowrap;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background: rgba(56,189,248,.9);
      box-shadow: 0 0 12px rgba(56,189,248,.35);
    }
    .small{font-size:.9rem;color:rgba(229,231,235,.75);}
    .eBio{margin-top:10px;color:rgba(156,163,175,.95);line-height:1.35;font-size:.95rem;}
    .eBadges{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;}
    .badge{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:#e5e7eb;
      font-size:.9rem;
    }
    .badge.pillBlue{border-color: rgba(124,58,237,.30);background: rgba(124,58,237,.10);}
    .badge.admin{border-color: rgba(255,60,80,.30);background: rgba(255,60,80,.10);}
    .admin-star{
      width:18px; height:18px; border-radius:50%;
      background: radial-gradient(circle at 35% 35%, #ff5a5a, #b0002f 70%);
      box-shadow: 0 0 18px rgba(255, 60, 80, .55), 0 0 0 3px rgba(255, 60, 80, .10);
      position:relative;
    }
    .admin-star::after{
      content:"‚òÖ";
      position:absolute; inset:0;
      display:grid; place-items:center;
      font-size:12px;
      color:rgba(255,255,255,.92);
      text-shadow: 0 0 10px rgba(255,255,255,.35);
    }
  </style>
</head>

<body>
  <div class="bg"></div>
  <div class="orb one"></div>
  <div class="orb two"></div>
  <div class="orb three"></div>
  <div class="sparkles"></div>

  <div class="page">
    <header>
      <div class="wrap">
        <h1>Karamello</h1>
        <div class="subtitle">Plataforma profissional de edi√ß√£o de fotos e v√≠deos</div>
      </div>
    </header>

    <main>
      <div class="wrap">

        <section id="screenStart" class="screen show">
          <div class="hero">
            <div class="card">
              <h3>Sou Cliente</h3>
              <p>Escolha um pacote pronto ou monte um pacote personalizado para suas fotos e v√≠deos.</p>
              <button class="btn" type="button" onclick="openCadastro('cliente')">Criar conta (Cliente)</button>
            </div>
            <div class="card">
              <h3>Quero Trabalhar</h3>
              <p>Cadastre-se como editor e receba pedidos de edi√ß√£o dentro da plataforma.</p>
              <button class="btn" type="button" onclick="openCadastro('editor')">Criar conta (Editor)</button>
            </div>
          </div>
        </section>

        <section id="screenClient" class="screen">
          <div class="section-title">Bem-vindo, <span id="clientName">Cliente</span> üëã</div>
          <div class="pill">Escolha um pacote pronto ou monte um pacote personalizado.</div>

          <div class="section-title" style="margin-top:18px">Pacotes prontos (15 op√ß√µes)</div>
          <div id="packagesGrid" class="grid" style="margin-top:12px"></div>

          <div class="section-title" style="margin-top:26px">Pacote Personalizado ‚ú®</div>
          <div class="grid" style="margin-top:12px">
            <div class="card highlight full">
              <h3>Monte seu pacote</h3>
              <p>Escolha quantas fotos/v√≠deos voc√™ quer, plataforma e tipo de v√≠deo. O site soma tudo por tr√°s e mostra s√≥ o total.</p>

              <div class="mini-grid" style="margin-top:12px">
                <div class="mini">
                  <label>Fotos</label>
                  <input id="custFotos" type="number" min="0" value="0" />
                </div>
                <div class="mini">
                  <label>V√≠deos</label>
                  <input id="custVideos" type="number" min="0" value="0" />
                </div>
              </div>

              <div class="mini-grid" style="margin-top:10px">
                <div class="mini">
                  <label>Plataforma</label>
                  <select id="custPlataforma">
                    <option value="reels">Instagram Reels</option>
                    <option value="tiktok">TikTok</option>
                    <option value="insta">Instagram Feed</option>
                    <option value="shorts">YouTube Shorts</option>
                  </select>
                </div>
                <div class="mini">
                  <label>Tipo de v√≠deo</label>
                  <select id="custTipoVideo">
                    <option value="15">Curto (at√© 15s)</option>
                    <option value="45">M√©dio (30‚Äì45s)</option>
                    <option value="60">Longo (at√© 60s)</option>
                  </select>
                </div>
              </div>

              <div class="checks" style="margin-top:10px">
                <label class="chk"><input data-custom-opt id="optCorCine" type="checkbox" /> Cor cinematogr√°fica (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optLegenda" type="checkbox" /> Legendas (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optTransicoes" type="checkbox" /> Transi√ß√µes premium (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optMotion" type="checkbox" /> Motion graphics (t√≠tulos) (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optIntroOutro" type="checkbox" /> Intro/Outro + CTA (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optEstabilizar" type="checkbox" /> Estabiliza√ß√£o (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optSpeedRamp" type="checkbox" /> Speed ramp / slow motion (v√≠deos)</label>

                <label class="chk"><input data-custom-opt id="optSFX" type="checkbox" /> Efeitos sonoros (SFX) (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optAudio" type="checkbox" /> Melhorar √°udio + reduzir ru√≠do (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optMusicSync" type="checkbox" /> Sincronizar cortes com m√∫sica (v√≠deos)</label>
                <label class="chk"><input data-custom-opt id="optVoiceClean" type="checkbox" /> Limpeza de voz / clareza (v√≠deos)</label>

                <label class="chk"><input data-custom-opt id="optRetoquePro" type="checkbox" /> Retoque avan√ßado (fotos)</label>
                <label class="chk"><input data-custom-opt id="optPele" type="checkbox" /> Suavizar pele (fotos)</label>
                <label class="chk"><input data-custom-opt id="optFundo" type="checkbox" /> Remover/alterar fundo (fotos)</label>
                <label class="chk"><input data-custom-opt id="optCoresFoto" type="checkbox" /> Cor cinematogr√°fica (fotos)</label>
                <label class="chk"><input data-custom-opt id="optHDR" type="checkbox" /> HDR / nitidez premium (fotos)</label>
                <label class="chk"><input data-custom-opt id="optObjeto" type="checkbox" /> Remover objetos (fotos)</label>
                <label class="chk"><input data-custom-opt id="optTexto" type="checkbox" /> Texto/arte simples (fotos)</label>

                <label class="chk"><input data-custom-opt id="optThumbnail" type="checkbox" /> Thumbnail (capa) (1 unidade)</label>
                <label class="chk"><input data-custom-opt id="optUrgente" type="checkbox" /> Prioridade (entrega mais r√°pida)</label>
              </div>

              <div class="field" style="margin-top:12px">
                <label>Categoria detalhada</label>
                <textarea id="custDetalhe" placeholder="Descreva exatamente como voc√™ quer: estilo, refer√™ncia, cores, cortes, m√∫sicas, legendas, plataformas, etc..."></textarea>
              </div>

              <div class="total-box">
                <div class="total-line"><span>Valor total</span><strong id="custTotal">R$ 0</strong></div>
                <div class="total-sub">Entrega estimada: <strong id="custEntrega">13h30</strong> (m√≠nimo)</div>
              </div>

              <button class="btn" type="button" onclick="confirmCustom()">Continuar com o personalizado</button>
              <div class="hint">* Os pre√ßos por item s√£o internos e n√£o aparecem.</div>
            </div>
          </div>

          <button class="btn secondary" style="margin-top:18px" type="button" onclick="goBackStart()">Voltar</button>
        </section>

        <!-- ‚úÖ NOVA TELA: ESCOLHA DO EDITOR (PARTE B) -->
        <section id="screenPickEditor" class="screen">
          <div class="section-title">Escolha seu Editor ‚≠ê</div>
          <div class="pill">Voc√™ ver√° editores compat√≠veis com o seu pedido (nota 0‚Äì10 e selo premium do admin).</div>

          <div class="toolbar">
            <div class="left">
              <span class="chip" id="pickInfo">Pedido: ‚Äî</span>
              <span class="chip">Avalia√ß√£o: 0‚Äì10</span>
            </div>
            <div class="right">
              <select id="pickSort" style="min-width:220px">
                <option value="best">Melhores avaliados</option>
                <option value="admin">Com estrela premium primeiro</option>
                <option value="fast">Mais r√°pidos (simulado)</option>
              </select>
            </div>
          </div>

          <div id="editorsGrid" class="editor-cards"></div>

          <button class="btn secondary" style="margin-top:18px" type="button" onclick="backToOrder()">Voltar</button>
        </section>

        <section id="screenEditor" class="screen">
          <div class="section-title">Bem-vindo, <span id="editorName">Editor</span> üëã</div>
          <div class="pill">Em breve voc√™ vai escolher em quais pacotes quer trabalhar.</div>

          <div class="card" style="margin-top:14px">
            <h3>Pr√≥ximos passos</h3>
            <p>Na pr√≥xima etapa: perfil do editor + escolher pacotes + lista de editores para o cliente selecionar.</p>
          </div>

          <button class="btn secondary" style="margin-top:18px" type="button" onclick="goBackStart()">Voltar</button>
        </section>

      </div>
    </main>

    <footer>¬© 2026 ‚Ä¢ Karamello ‚Ä¢ Edi√ß√£o profissional</footer>
  </div>

  <div id="overlay" class="overlay" aria-hidden="true">
    <div id="modal" class="modal" role="dialog" aria-modal="true">
      <div class="modalHead">
        <strong id="titleCadastro">Criar conta</strong>
        <button class="close" type="button" onclick="closeCadastro()">√ó</button>
      </div>
      <div class="modalBody">
        <div class="field"><label>Nome</label><input id="inNome" placeholder="Seu nome" /></div>
        <div class="field"><label>Sobrenome</label><input id="inSobrenome" placeholder="Seu sobrenome" /></div>
        <div class="field"><label>Data de nascimento</label><input id="inData" type="date" /></div>
        <div class="field"><label>Email</label><input id="inEmail" type="email" placeholder="seuemail@gmail.com" /></div>
        <div class="field"><label>Senha</label><input id="inSenha" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" /></div>

        <button id="btnCadastrar" class="btn" type="button">Continuar</button>
        <button class="btn secondary" type="button" onclick="alert('Entrar com Google: em breve (precisa backend).')">Entrar com Google (em breve)</button>
        <div class="hint">* Login real com Google e seguran√ßa total entram na etapa futura (backend).</div>
      </div>
    </div>
  </div>

  <script>
    const overlay = document.getElementById('overlay');
    const modal = document.getElementById('modal');
    const titleCadastro = document.getElementById('titleCadastro');
    const btnCadastrar = document.getElementById('btnCadastrar');

    const screenStart = document.getElementById('screenStart');
    const screenClient = document.getElementById('screenClient');
    const screenPickEditor = document.getElementById('screenPickEditor');
    const screenEditor = document.getElementById('screenEditor');

    const inNome = document.getElementById('inNome');
    const inSobrenome = document.getElementById('inSobrenome');

    const clientName = document.getElementById('clientName');
    const editorName = document.getElementById('editorName');

    let role = null;

    function openCadastro(tipo){
      role = tipo;
      titleCadastro.textContent = (tipo === 'cliente') ? 'Criar conta como Cliente' : 'Criar conta como Editor';
      overlay.classList.remove('closing');
      modal.classList.remove('closing');
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
      modal.style.animation = 'none'; void modal.offsetHeight; modal.style.animation = '';
    }

    function closeCadastro(){
      overlay.classList.add('closing');
      modal.classList.add('closing');
      setTimeout(() => {
        overlay.classList.remove('show','closing');
        modal.classList.remove('closing');
        overlay.setAttribute('aria-hidden','true');
      }, 220);
    }
    overlay.addEventListener('click', (e) => { if(e.target === overlay) closeCadastro(); });

    function showScreen(which){
      [screenStart, screenClient, screenPickEditor, screenEditor].forEach(s => s.classList.remove('show'));
      setTimeout(() => { which.classList.add('show'); window.scrollTo({top:0, behavior:'smooth'}); }, 50);
    }
    function goBackStart(){ showScreen(screenStart); }

    const packages = [
      {id:1,  name:'Starter Foto',     price:27.40, eta:'13h30', items:['1 Foto (b√°sica)','Cor + nitidez']},
      {id:2,  name:'Duo Foto',         price:41.80, eta:'13h30', items:['2 Fotos (b√°sicas)','Cor + nitidez']},
      {id:3,  name:'Foto Pro 3',       price:53.60, eta:'14h30', items:['3 Fotos (pro)','Ajustes finos + cor']},
      {id:4,  name:'V√≠deo Short 15s',  price:63.90, eta:'14h30', items:['1 V√≠deo curto (at√© 15s)','Cortes + ritmo']},
      {id:5,  name:'Foto Pack 4',      price:73.50, eta:'15h00', items:['4 Fotos (pro)','Cor + detalhes']},
      {id:6,  name:'Short Duo',        price:86.40, eta:'15h30', items:['2 V√≠deos curtos (at√© 15s)','Cortes + transi√ß√µes simples']},
      {id:7,  name:'Combo Social',     price:96.80, eta:'16h00', items:['1 Foto + 1 V√≠deo curto','Look cinematogr√°fico leve']},
      {id:8,  name:'Foto Pack 5',      price:108.90,eta:'18h00', items:['5 Fotos (pro)','Padroniza√ß√£o de cor']},
      {id:9,  name:'Short Trio',       price:132.70,eta:'18h00', items:['3 V√≠deos curtos (at√© 15s)','Cor + ritmo']},
      {id:10, name:'Foto Pack 8',      price:151.40,eta:'24h',   items:['8 Fotos (pro)','Cor + retoques leves']},
      {id:11, name:'Short 5',          price:176.90,eta:'24h',   items:['5 V√≠deos curtos','Cortes + cor']},
      {id:12, name:'Creator Mix',      price:197.80,eta:'24h',   items:['10 Fotos + 1 V√≠deo curto','Padroniza√ß√£o completa']},
      {id:13, name:'V√≠deo M√©dio 45s',  price:221.60,eta:'24h',   items:['1 V√≠deo m√©dio (30‚Äì45s)','Cor + transi√ß√µes']},
      {id:14, name:'V√≠deo Longo 60s',  price:259.40,eta:'48h',   items:['1 V√≠deo longo (at√© 60s)','Edi√ß√£o avan√ßada']},
      {id:15, name:'Premium Creator',  price:329.90,eta:'48h',   items:['15 Fotos + 3 V√≠deos curtos','Look premium + revis√£o']},
    ];

    function brl(v){ return v.toLocaleString('pt-BR', {style:'currency', currency:'BRL'}); }

    function renderPackages(){
      const grid = document.getElementById('packagesGrid');
      grid.innerHTML = '';
      packages.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h3>${p.id}. ${p.name}</h3>
          <p>Entrega a partir de <strong>${p.eta}</strong> (m√≠nimo 13h30)</p>
          <div class="price">${brl(p.price)}</div>
          <ul>${p.items.map(i=>`<li>${i}</li>`).join('')}</ul>
          <button class="btn" type="button" onclick="choosePackage(${p.id})">Escolher pacote</button>
        `;
        grid.appendChild(card);
      });
    }

    const custFotos = document.getElementById('custFotos');
    const custVideos = document.getElementById('custVideos');
    const custPlataforma = document.getElementById('custPlataforma');
    const custTipoVideo = document.getElementById('custTipoVideo');
    const custTotal = document.getElementById('custTotal');
    const custEntrega = document.getElementById('custEntrega');

    const PRICES = {
      foto: 21.40,
      video15: 44.90,
      video45: 66.70,
      video60: 84.60,
      platformMult: { reels:1.00, tiktok:1.00, insta:1.04, shorts:1.04 }
    };

    const EXTRA_OPTIONS = [
      { id:'optCorCine',    kind:'video', price:11.60 },
      { id:'optLegenda',    kind:'video', price:11.60 },
      { id:'optTransicoes', kind:'video', price:9.40  },
      { id:'optMotion',     kind:'video', price:11.60 },
      { id:'optIntroOutro', kind:'video', price:11.60 },
      { id:'optEstabilizar',kind:'video', price:11.60 },
      { id:'optSpeedRamp',  kind:'video', price:9.40  },

      { id:'optSFX',        kind:'video', price:9.40  },
      { id:'optAudio',      kind:'video', price:11.60 },
      { id:'optMusicSync',  kind:'video', price:9.90  },
      { id:'optVoiceClean', kind:'video', price:11.90 },

      { id:'optRetoquePro', kind:'photo', price:9.40  },
      { id:'optPele',       kind:'photo', price:9.40  },
      { id:'optFundo',      kind:'photo', price:11.60 },
      { id:'optCoresFoto',  kind:'photo', price:9.40  },
      { id:'optHDR',        kind:'photo', price:9.40  },
      { id:'optObjeto',     kind:'photo', price:11.60 },
      { id:'optTexto',      kind:'photo', price:9.40  },

      { id:'optThumbnail',  kind:'order', price:19.90 },
      { id:'optUrgente',    kind:'order', price:29.90 },
    ];

    function calcEntrega(total, urgent){
      let eta = '13h30';
      if(total <= 120) eta = '13h30';
      else if(total <= 250) eta = '14h30';
      else if(total <= 400) eta = '18h00';
      else if(total <= 700) eta = '24h';
      else eta = '48h';

      if(urgent){
        if(eta === '48h') eta = '24h';
        else if(eta === '24h') eta = '18h00';
        else if(eta === '18h00') eta = '14h30';
        else eta = '13h30';
      }
      return eta;
    }

    function calcCustom(){
      const fotos = Math.max(0, parseInt(custFotos.value||'0',10));
      const vids  = Math.max(0, parseInt(custVideos.value||'0',10));
      const plat  = custPlataforma.value||'reels';
      const tipo  = custTipoVideo.value||'15';

      let unitVideo = PRICES.video15;
      if(tipo==='45') unitVideo = PRICES.video45;
      if(tipo==='60') unitVideo = PRICES.video60;

      const mult = PRICES.platformMult[plat] ?? 1.0;

      let extraVideo=0, extraPhoto=0, extraOrder=0;
      EXTRA_OPTIONS.forEach(o=>{
        const el=document.getElementById(o.id);
        if(!el||!el.checked) return;
        if(o.kind==='video') extraVideo+=o.price;
        else if(o.kind==='photo') extraPhoto+=o.price;
        else extraOrder+=o.price;
      });

      const rawTotal = (fotos*(PRICES.foto+extraPhoto)) + (vids*(unitVideo*mult+extraVideo)) + extraOrder;
      const jitter = (fotos+vids)>0 ? (0.30 + ((fotos*7 + vids*11)%7)*0.10) : 0;
      const total = Math.max(0, rawTotal + jitter);

      custTotal.textContent = brl(total);
      const urgent = document.getElementById('optUrgente')?.checked || false;
      custEntrega.textContent = calcEntrega(total, urgent);
    }

    [custFotos,custVideos,custPlataforma,custTipoVideo].forEach(el=>{
      el.addEventListener('input', calcCustom);
      el.addEventListener('change', calcCustom);
    });
    Array.from(document.querySelectorAll('[data-custom-opt]')).forEach(el=>{
      el.addEventListener('change', calcCustom);
    });

    btnCadastrar.addEventListener('click', ()=>{
      const nome=(inNome.value||'').trim();
      const sobrenome=(inSobrenome.value||'').trim();
      if(!nome||!sobrenome){ alert('Preencha Nome e Sobrenome.'); return; }
      closeCadastro();
      if(role==='cliente'){
        clientName.textContent = nome;
        showScreen(screenClient);
        setTimeout(()=>{ renderPackages(); calcCustom(); },80);
      }else{
        editorName.textContent = nome;
        showScreen(screenEditor);
      }
    });

    // ===== PARTE B: Sele√ß√£o de Editores =====
    const editorsGrid = document.getElementById('editorsGrid');
    const pickInfo = document.getElementById('pickInfo');
    const pickSort = document.getElementById('pickSort');

    let currentOrder = null;
    let lastOrderScreen = null;

    const DEMO_EDITORS = [
      { id:"e1", name:"Nox Studio", xp:"avancado", soft:"CapCut, Premiere", bio:"Cortes r√°pidos + ritmo + look premium. Foco em Reels/TikTok.", nota:9.6, adminStar:true,  packs:[4,6,9,11,13,14,15] },
      { id:"e2", name:"Luna Color",  xp:"intermediario", soft:"Lightroom, Photoshop", bio:"Foto pro: cor, nitidez, pele e fundo. Resultado clean e elegante.", nota:9.2, adminStar:false, packs:[1,2,3,5,8,10,12,15] },
      { id:"e3", name:"Vibe Sync",   xp:"avancado", soft:"Premiere, After Effects", bio:"Motion e transi√ß√µes premium. Sincroniza com m√∫sica e CTA.", nota:9.4, adminStar:false, packs:[4,6,7,9,11,13,14,15] },
      { id:"e4", name:"CineLite",    xp:"intermediario", soft:"CapCut", bio:"Bom custo-benef√≠cio, entrega r√°pida, ajustes essenciais bem feitos.", nota:8.8, adminStar:false, packs:[1,2,4,6,7,8,10,11,13] },
    ];

    function openPickEditor(order, fromScreen){
      currentOrder = order;
      lastOrderScreen = fromScreen;
      pickInfo.textContent = `Pedido: ${order.title}`;
      renderEditorsForOrder(order);
      showScreen(screenPickEditor);
    }

    function backToOrder(){
      if(lastOrderScreen) showScreen(lastOrderScreen);
      else showScreen(screenClient);
    }

    pickSort?.addEventListener('change', ()=>{
      if(currentOrder) renderEditorsForOrder(currentOrder);
    });

    function eligibleEditors(order){
      if(order.type === "package" && order.packageId){
        return DEMO_EDITORS.filter(e => e.packs.includes(order.packageId));
      }
      if(order.type === "custom"){
        const hasVideos = (order.videos||0) > 0;
        const hasFotos  = (order.fotos||0) > 0;

        const videoFamily = [4,6,7,9,11,13,14,15];
        const photoFamily = [1,2,3,5,8,10,12,15];

        const needed = new Set([
          ...(hasVideos ? videoFamily : []),
          ...(hasFotos ? photoFamily : [])
        ]);

        const filtered = DEMO_EDITORS.filter(e => e.packs.some(pid => needed.has(pid)));
        return filtered.length ? filtered : DEMO_EDITORS;
      }
      return DEMO_EDITORS;
    }

    function sortEditors(list){
      const mode = pickSort?.value || "best";
      const copy = [...list];

      if(mode === "admin"){
        copy.sort((a,b)=> (b.adminStar===true)-(a.adminStar===true) || (b.nota-a.nota));
        return copy;
      }
      if(mode === "fast"){
        copy.sort((a,b)=> (b.nota-a.nota));
        return copy;
      }
      copy.sort((a,b)=> (b.nota-a.nota));
      return copy;
    }

    function renderEditorsForOrder(order){
      const list = sortEditors(eligibleEditors(order));
      editorsGrid.innerHTML = "";

      if(!list.length){
        editorsGrid.innerHTML = `<div class="card full"><h3>Nenhum editor dispon√≠vel agora</h3><p>Tente novamente em alguns minutos.</p></div>`;
        return;
      }

      list.forEach(ed=>{
        const card = document.createElement("div");
        card.className = "eCard";

        const xpLabel = ed.xp === "avancado" ? "Avan√ßado" : ed.xp === "intermediario" ? "Intermedi√°rio" : "Iniciante";

        card.innerHTML = `
          <div class="eTop">
            <div>
              <div class="eName">${ed.name}</div>
              <div class="eMeta">${xpLabel} ‚Ä¢ ${ed.soft || "‚Äî"}</div>
            </div>
            <div class="rating"><span class="dot"></span><strong>${Number(ed.nota).toFixed(1)}</strong><span class="small">/10</span></div>
          </div>

          <div class="eBio">${ed.bio || ""}</div>

          <div class="eBadges">
            <span class="badge pillBlue">Pacotes: ${ed.packs.length}</span>
            ${ed.adminStar ? `<span class="badge admin" style="display:inline-flex;align-items:center;gap:8px"><span class="admin-star"></span> Selo premium</span>` : ``}
          </div>

          <button class="btn" type="button" style="margin-top:12px" onclick="selectEditor('${ed.id}')">Escolher este editor</button>
        `;
        editorsGrid.appendChild(card);
      });
    }

    function selectEditor(editorId){
      const ed = DEMO_EDITORS.find(x => x.id === editorId);
      if(!ed || !currentOrder) return;

      const extra = ed.adminStar ? " (‚≠ê selo premium)" : "";
      alert(
        `Editor selecionado: ${ed.name}${extra}\n`+
        `Nota: ${Number(ed.nota).toFixed(1)}/10\n\n`+
        `Pedido: ${currentOrder.title}\n`+
        `Total: ${currentOrder.total}\n`+
        `Entrega: ${currentOrder.eta}\n\n`+
        `Pr√≥ximo passo: checkout/finaliza√ß√£o (vamos colocar depois).`
      );

      // volta pro cliente por enquanto
      showScreen(screenClient);
    }

    // ‚úÖ AQUI: agora escolher pacote abre a sele√ß√£o de editor
    function choosePackage(id){
      const p = packages.find(x => x.id === id);
      openPickEditor({
        type: "package",
        packageId: p.id,
        title: `${p.id}. ${p.name}`,
        total: brl(p.price),
        eta: p.eta
      }, screenClient);
    }

    // ‚úÖ AQUI: personalizado tamb√©m abre a sele√ß√£o de editor
    function confirmCustom(){
      const fotos = Math.max(0, parseInt(custFotos.value||'0',10));
      const vids  = Math.max(0, parseInt(custVideos.value||'0',10));

      openPickEditor({
        type: "custom",
        title: `Personalizado ‚Ä¢ ${fotos} fotos ‚Ä¢ ${vids} v√≠deos`,
        fotos, videos: vids,
        total: custTotal.textContent,
        eta: custEntrega.textContent
      }, screenClient);
    }

    window.addEventListener('DOMContentLoaded', ()=>{ calcCustom(); });
  </script>
</body>
</html>
